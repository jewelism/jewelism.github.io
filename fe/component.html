<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>컴포넌트와 컴포넌트 설계 | Jewelry Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-NG6SBMZL');</script>
    <link rel="icon" href="/images/logo.png">
    <meta name="description" content="dev blog">
    <meta property="og:title" content="Jewelry Blog">
    <meta property="og:description" content="dev blog">
    <meta name="naver-site-verification" property="naver-site-verification" content="5b2f37c7b4199869388745a2b48d71230f79701b">
    
    <link rel="preload" href="/assets/css/0.styles.7b19a011.css" as="style"><link rel="preload" href="/assets/js/app.d8edd250.js" as="script"><link rel="preload" href="/assets/js/2.b813d316.js" as="script"><link rel="preload" href="/assets/js/1.63ec6906.js" as="script"><link rel="preload" href="/assets/js/61.322cf604.js" as="script"><link rel="prefetch" href="/assets/js/10.68915e8a.js"><link rel="prefetch" href="/assets/js/100.d48fb8d1.js"><link rel="prefetch" href="/assets/js/101.b5ebbd9c.js"><link rel="prefetch" href="/assets/js/102.982f90cb.js"><link rel="prefetch" href="/assets/js/103.c96dc806.js"><link rel="prefetch" href="/assets/js/104.f1a3e6c7.js"><link rel="prefetch" href="/assets/js/105.bee66f51.js"><link rel="prefetch" href="/assets/js/106.d4e221ac.js"><link rel="prefetch" href="/assets/js/107.17fa7b87.js"><link rel="prefetch" href="/assets/js/108.036293f3.js"><link rel="prefetch" href="/assets/js/109.f902e0bc.js"><link rel="prefetch" href="/assets/js/11.90e8c648.js"><link rel="prefetch" href="/assets/js/110.23cf18f3.js"><link rel="prefetch" href="/assets/js/111.25a08651.js"><link rel="prefetch" href="/assets/js/112.b575ba09.js"><link rel="prefetch" href="/assets/js/113.39d46774.js"><link rel="prefetch" href="/assets/js/114.54b1d77d.js"><link rel="prefetch" href="/assets/js/115.49ad11c7.js"><link rel="prefetch" href="/assets/js/116.d1eb4002.js"><link rel="prefetch" href="/assets/js/117.641cbc64.js"><link rel="prefetch" href="/assets/js/118.8c20b0ee.js"><link rel="prefetch" href="/assets/js/119.5e1499c4.js"><link rel="prefetch" href="/assets/js/12.566e820c.js"><link rel="prefetch" href="/assets/js/120.bd6dbcbf.js"><link rel="prefetch" href="/assets/js/121.fdb8d482.js"><link rel="prefetch" href="/assets/js/122.2b358183.js"><link rel="prefetch" href="/assets/js/123.47da7d6f.js"><link rel="prefetch" href="/assets/js/124.25f4b64b.js"><link rel="prefetch" href="/assets/js/125.3600f35d.js"><link rel="prefetch" href="/assets/js/126.bf9c3ab6.js"><link rel="prefetch" href="/assets/js/127.2a668d3c.js"><link rel="prefetch" href="/assets/js/128.f6e7d7a4.js"><link rel="prefetch" href="/assets/js/129.de543284.js"><link rel="prefetch" href="/assets/js/13.7d78815a.js"><link rel="prefetch" href="/assets/js/130.b8eb138d.js"><link rel="prefetch" href="/assets/js/131.df799559.js"><link rel="prefetch" href="/assets/js/132.87f8fdd2.js"><link rel="prefetch" href="/assets/js/133.1ecedbc9.js"><link rel="prefetch" href="/assets/js/134.050b3131.js"><link rel="prefetch" href="/assets/js/135.67fab777.js"><link rel="prefetch" href="/assets/js/136.5606edf6.js"><link rel="prefetch" href="/assets/js/137.e66661fb.js"><link rel="prefetch" href="/assets/js/138.f9436bbb.js"><link rel="prefetch" href="/assets/js/139.8ea1d596.js"><link rel="prefetch" href="/assets/js/14.a384c04f.js"><link rel="prefetch" href="/assets/js/140.ac02ebc5.js"><link rel="prefetch" href="/assets/js/141.14b29649.js"><link rel="prefetch" href="/assets/js/142.e57ed7db.js"><link rel="prefetch" href="/assets/js/143.06f2348c.js"><link rel="prefetch" href="/assets/js/144.a54de9c0.js"><link rel="prefetch" href="/assets/js/145.8714c371.js"><link rel="prefetch" href="/assets/js/146.afd802e8.js"><link rel="prefetch" href="/assets/js/15.5581965d.js"><link rel="prefetch" href="/assets/js/16.36a6df8c.js"><link rel="prefetch" href="/assets/js/17.58419ce3.js"><link rel="prefetch" href="/assets/js/18.78334840.js"><link rel="prefetch" href="/assets/js/19.31ca3599.js"><link rel="prefetch" href="/assets/js/20.55945dbc.js"><link rel="prefetch" href="/assets/js/21.6ddb8d2b.js"><link rel="prefetch" href="/assets/js/22.8d390135.js"><link rel="prefetch" href="/assets/js/23.5d48bf66.js"><link rel="prefetch" href="/assets/js/24.98a3f2a7.js"><link rel="prefetch" href="/assets/js/25.58157085.js"><link rel="prefetch" href="/assets/js/26.f12be7ca.js"><link rel="prefetch" href="/assets/js/27.8b47009c.js"><link rel="prefetch" href="/assets/js/28.94f9feb0.js"><link rel="prefetch" href="/assets/js/29.5b7d2648.js"><link rel="prefetch" href="/assets/js/3.333fb557.js"><link rel="prefetch" href="/assets/js/30.705c0baa.js"><link rel="prefetch" href="/assets/js/31.fdb59e0f.js"><link rel="prefetch" href="/assets/js/32.2383a55b.js"><link rel="prefetch" href="/assets/js/33.bfbec105.js"><link rel="prefetch" href="/assets/js/34.69f76c89.js"><link rel="prefetch" href="/assets/js/35.9f0aa7e6.js"><link rel="prefetch" href="/assets/js/36.02beee59.js"><link rel="prefetch" href="/assets/js/37.19802134.js"><link rel="prefetch" href="/assets/js/38.5653c840.js"><link rel="prefetch" href="/assets/js/39.e3b746fa.js"><link rel="prefetch" href="/assets/js/4.95c43ca0.js"><link rel="prefetch" href="/assets/js/40.96d79a78.js"><link rel="prefetch" href="/assets/js/41.268c3897.js"><link rel="prefetch" href="/assets/js/42.2339675a.js"><link rel="prefetch" href="/assets/js/43.826b5267.js"><link rel="prefetch" href="/assets/js/44.7eabcb79.js"><link rel="prefetch" href="/assets/js/45.e9a3bb83.js"><link rel="prefetch" href="/assets/js/46.7a822972.js"><link rel="prefetch" href="/assets/js/47.5e9b258d.js"><link rel="prefetch" href="/assets/js/48.6db42384.js"><link rel="prefetch" href="/assets/js/49.99deed78.js"><link rel="prefetch" href="/assets/js/5.9d9e1e88.js"><link rel="prefetch" href="/assets/js/50.7829d7c4.js"><link rel="prefetch" href="/assets/js/51.9941a5c2.js"><link rel="prefetch" href="/assets/js/52.c528219a.js"><link rel="prefetch" href="/assets/js/53.b486f5b8.js"><link rel="prefetch" href="/assets/js/54.3590e606.js"><link rel="prefetch" href="/assets/js/55.3f5aa439.js"><link rel="prefetch" href="/assets/js/56.d22c590b.js"><link rel="prefetch" href="/assets/js/57.af5f42f5.js"><link rel="prefetch" href="/assets/js/58.b12ffd2f.js"><link rel="prefetch" href="/assets/js/59.32c30e64.js"><link rel="prefetch" href="/assets/js/60.e8005a21.js"><link rel="prefetch" href="/assets/js/62.c11f3a96.js"><link rel="prefetch" href="/assets/js/63.c5506d7b.js"><link rel="prefetch" href="/assets/js/64.0d80102d.js"><link rel="prefetch" href="/assets/js/65.dfb2d864.js"><link rel="prefetch" href="/assets/js/66.370ef41d.js"><link rel="prefetch" href="/assets/js/67.88c9e001.js"><link rel="prefetch" href="/assets/js/68.f338a0d2.js"><link rel="prefetch" href="/assets/js/69.bdb4c5b0.js"><link rel="prefetch" href="/assets/js/70.c38e5f80.js"><link rel="prefetch" href="/assets/js/71.88270db3.js"><link rel="prefetch" href="/assets/js/72.dcd32982.js"><link rel="prefetch" href="/assets/js/73.58f68dab.js"><link rel="prefetch" href="/assets/js/74.4ada683a.js"><link rel="prefetch" href="/assets/js/75.a6d32488.js"><link rel="prefetch" href="/assets/js/76.c0d0c351.js"><link rel="prefetch" href="/assets/js/77.5c46677d.js"><link rel="prefetch" href="/assets/js/78.d2e954df.js"><link rel="prefetch" href="/assets/js/79.737ec5f0.js"><link rel="prefetch" href="/assets/js/8.ca781c48.js"><link rel="prefetch" href="/assets/js/80.5d71fe19.js"><link rel="prefetch" href="/assets/js/81.217ef913.js"><link rel="prefetch" href="/assets/js/82.7362843c.js"><link rel="prefetch" href="/assets/js/83.5e90d306.js"><link rel="prefetch" href="/assets/js/84.4420de65.js"><link rel="prefetch" href="/assets/js/85.473092ef.js"><link rel="prefetch" href="/assets/js/86.04701726.js"><link rel="prefetch" href="/assets/js/87.83273b43.js"><link rel="prefetch" href="/assets/js/88.676b6f5c.js"><link rel="prefetch" href="/assets/js/89.9ba0b94d.js"><link rel="prefetch" href="/assets/js/9.13b3374f.js"><link rel="prefetch" href="/assets/js/90.eb51ebaa.js"><link rel="prefetch" href="/assets/js/91.7b0c3d93.js"><link rel="prefetch" href="/assets/js/92.af3e1247.js"><link rel="prefetch" href="/assets/js/93.776e9706.js"><link rel="prefetch" href="/assets/js/94.43b48ebf.js"><link rel="prefetch" href="/assets/js/95.ba8e4bc1.js"><link rel="prefetch" href="/assets/js/96.2fa5d3a3.js"><link rel="prefetch" href="/assets/js/97.1c4f3144.js"><link rel="prefetch" href="/assets/js/98.0c7cbaa6.js"><link rel="prefetch" href="/assets/js/99.b171f0e5.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.73bb25e3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7b19a011.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name" style="margin-left:15px;">Jewelry Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/js" class="sidebar-heading clickable"><span>Javascript</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/fe" class="sidebar-heading clickable router-link-active open"><span>Front-End</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/charles-proxy.html" class="sidebar-link">찰스 프록시 사용하기</a></li><li><a href="/fe/component.html" aria-current="page" class="active sidebar-link">컴포넌트와 컴포넌트 설계</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe/component.html#모델렌더-model-render" class="sidebar-link">모델렌더 model render</a></li><li class="sidebar-sub-header"><a href="/fe/component.html#props" class="sidebar-link">props</a></li><li class="sidebar-sub-header"><a href="/fe/component.html#템플릿" class="sidebar-link">템플릿</a></li><li class="sidebar-sub-header"><a href="/fe/component.html#안티패턴" class="sidebar-link">안티패턴</a></li><li class="sidebar-sub-header"><a href="/fe/component.html#가독성" class="sidebar-link">가독성?</a></li></ul></li><li><a href="/fe/cors.html" class="sidebar-link">cors</a></li><li><a href="/fe/csr-ssr.html" class="sidebar-link">CSR, SSR</a></li><li><a href="/fe/css.html" class="sidebar-link">CSS</a></li><li><a href="/fe/jest-snapshot-test.html" class="sidebar-link">Snapshot Test</a></li><li><a href="/fe/optimizing.html" class="sidebar-link">최적화 관련</a></li><li><a href="/fe/pre-render.html" class="sidebar-link">Pre-render</a></li><li><a href="/fe/proxy.html" class="sidebar-link">proxy</a></li><li><a href="/fe/react-auto-batch.html" class="sidebar-link">React Auto Batching</a></li><li><a href="/fe/react-hook-test-jest.html" class="sidebar-link">React Hook Test with Jest</a></li><li><a href="/fe/react-native.html" class="sidebar-link">React-native</a></li><li><a href="/fe/react-tutorial.html" class="sidebar-link">React Tutorial</a></li><li><a href="/fe/react.html" class="sidebar-link">React</a></li><li><a href="/fe/rxjs.html" class="sidebar-link">RxJS</a></li><li><a href="/fe/scrolltobottom.html" class="sidebar-link">scrollToBottom</a></li><li><a href="/fe/seo-check-point.html" class="sidebar-link">SEO Check Point</a></li><li><a href="/fe/testing-in-mobile.html" class="sidebar-link">모바일 브라우저 테스트 환경설정</a></li><li><a href="/fe/virtual-dom.html" class="sidebar-link">Virtual DOM, Key</a></li><li><a href="/fe/vue-tutorial.html" class="sidebar-link">Vue Tutorial</a></li><li><a href="/fe/watch.html" class="sidebar-link">watch 구현</a></li><li><a href="/fe/web-term.html" class="sidebar-link">웹 관련 용어</a></li><li><a href="/fe/webpack-babel.html" class="sidebar-link">webpack, babel</a></li><li><a href="/fe/webpack-dev-server.html" class="sidebar-link">webpack-dev-server</a></li><li><a href="/fe/webview.html" class="sidebar-link">webview</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/browser" class="sidebar-heading clickable"><span>Web Browser</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/server-side" class="sidebar-heading clickable"><span>Server Side</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/cs" class="sidebar-heading clickable"><span>Computer Science</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/git" class="sidebar-heading clickable"><span>Git</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/design-pattern" class="sidebar-heading clickable"><span>Design Pattern</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/nodejs" class="sidebar-heading clickable"><span>Node.js</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/godot" class="sidebar-heading clickable"><span>godot (고도 게임엔진)</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/tip" class="sidebar-heading clickable"><span>개발 관련 Tip</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="시작하기-앞서"><a href="#시작하기-앞서" class="header-anchor">#</a> 시작하기 앞서</h1> <p>우선, react 함수형 컴포넌트 기준으로 설명합니다.</p> <p>react, vue 같은 ui 'library'의 역할이 무엇인지 생각해봐야합니다.</p> <p>왜 이들이 라이브러리라고 불리는지, 무엇을 하는지 정확하게 알고 넘어가야합니다.</p> <p>ui library는 ui 데이터(상태, 속성)가 변경되면 ui를 갱신해줍니다.</p> <p>직접 DOM에 접근하여 ui를 갱신하는 것은 상당히 피곤한 일 입니다. 크로스브라우징 이슈를 신경써야하며, 비즈니스 로직과 ui를 갱신하는 로직이 섞여서 유지보수가 힘들어집니다.</p> <p>위에서도 언급했던 것처럼 브라우저 API마다 다른 동작을 할 수 있는 가능성을 사전에 차단합니다. =&gt; 크로스 브라우징</p> <p>라이브러리의 지원범위내의 브라우저라면, 브라우저에는 개발자가 의도하는대로 렌더링됩니다.</p> <p>라이브러리에 버그가 있다면 라이브러리측에서 수정해주길 기다리거나, 직접 수정해서 사용하면 됩니다. =&gt; 제어역전</p> <p>ui library 자체는 결국 단순 '렌더링'만 하기때문에 router 라던지 상태관리 등 다른 기능은 써드파티 라이브러리를 사용해야합니다.</p> <h1 id="컴포넌트"><a href="#컴포넌트" class="header-anchor">#</a> 컴포넌트</h1> <p>이해하기쉽게 <strong>'html 엘리먼트의 집합체'</strong> 혹은 블럭이라고 표현할 수 있겠습니다.</p> <p>마치 레고 블럭처럼 컴포넌트들을 조합하여 앱을 개발합니다.</p> <p>vue에서는 vue 객체, react에서는 일반적으로 React Element tree를 리턴하는 자바스크립트 함수입니다.</p> <p>아무것도 렌더링하지않으려면 null을 리턴해야합니다. (react에서는 컴포넌트가 undefined를 리턴하면 에러입니다.)</p> <p>요약하면 리액트 컴포넌트는 react element tree or null을 반환하고 함수 이름이 PascalCase인 자바스크립트 함수입니다.</p> <p>리액트 공식문서에서는 아래와 같이 설명하고 있습니다.</p> <div class="language- extra-class"><pre class="language-text"><code>개념적으로 컴포넌트는 JavaScript 함수와 유사합니다.
“props”라고 하는 임의의 입력을 받은 후,
화면에 어떻게 표시되는지를 기술하는 React 엘리먼트를 반환합니다.
</code></pre></div><h1 id="컴포넌트-설계"><a href="#컴포넌트-설계" class="header-anchor">#</a> 컴포넌트 설계</h1> <p>js숙련도가 있다면 컴포넌트를 잘 설계하는게 FE개발 실력의 핵심이라고 할 수 있습니다.</p> <p>같은 기능을 가진 컴포넌트라도 설계는 사람마다 달라질 수 있죠.</p> <p>그래서 아래에서 설명하는 컴포넌트 설계방법은 꽤 주관적이며 관점에 따라 다를 수 있습니다. 어찌보면 당연한 내용도 포함되어있고요.</p> <div class="language- extra-class"><pre class="language-text"><code>좋은 컴포넌트 개발의 핵심은 재활용 가능한 컴포넌트입니다.

컴포넌트는 기본적으로 StateSetter(StateUpdater)가 호출되면 리렌더됩니다.

성능관점에서 state와 props는 최대한 변경되지 않을수록 유리합니다.

props만 받아서 렌더만하는 컴포넌트는(프레젠테이션 컴포넌트) storybook을 활용하기 좋으며 쉽게 테스트하고 재활용 할 수 있습니다.

모델렌더를 실현하기도 쉬워지고요. 모델렌더는 아래에서 다시 설명합니다.

</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>최근 react에서는 함수형 컴포넌트를 작성하면서 hook API을 사용하게되는데, custom hook을 적극 활용하는게 좋습니다.

마치 클래스 컴포넌트를 사용할때, 프레젠테이션과 컨테이너를 분리했던 것처럼요. 

프레젠테이션 컴포넌트 + 모델(hook)을 조합하면 이상적인 컴포넌트 구현입니다.

컴포넌트에서 로직을 깔끔하게 분리해낼 수 있으며 로직의 재활용성과 가독성을 향상시킵니다. (관심사 분리)

훅만 테스트하는건 거의 로직만 테스트하는거라, 테스트코드 작성도 상대적으로 매우 간편해집니다.

상태와 로직, 템플릿이 마구 섞여져있을 수 있는데,

상태를 관리하는 hook - props, state, ref, useMemo를 사용한 computed variable 등..

로직을 관리하는 hook - useCallback을 이용한 메모이제이션된 함수들
</code></pre></div><p>hook에 대한 자세한 내용은 <a href="/js-react/hook-api.html">여기를 참고</a>하세요</p> <h2 id="모델렌더-model-render"><a href="#모델렌더-model-render" class="header-anchor">#</a> 모델렌더 model render</h2> <p>뷰가 상태를 갖는것이 아닌, 순수 js 객체가 상태를 가져야합니다.</p> <p>같은 데이터라면 같은 렌더링이 되어야한다는 것입니다.</p> <p>뷰를 직접 제어하지 않으므로 버그를 발생시키지않고 단순히 모델을 갱신해서 렌더를 발생시켜야합니다.</p> <p>= DOM을 직접 조작하지말고 setState를 사용해라.</p> <p>그래야 테스트코드도 작성하기 쉬워집니다.</p> <h2 id="props"><a href="#props" class="header-anchor">#</a> props</h2> <p>극단적으로 표현하면...</p> <p>state만 있더라도 컴포넌트를 개발할 수 있습니다.</p> <p>props의 존재 이유는 사실 컴포넌트 재활용 말고는 없다고 봐도 됩니다.</p> <p>무분별하게 컴포넌트를 나누기보단, 컴포넌트가 재활용될 가능성을 생각해보고 컴포넌트를 나누는게 좋습니다.</p> <p>기본적으로 함수형 리액트 컴포넌트에서는 상위 컴포넌트를 리렌더할때 하위 컴포넌트들을 다시 호출하기 때문이죠.</p> <p>물론 재활용을 안하더라도, 가독성이나 storybook등 다른 이유로 컴포넌트를 나눌수는 있겠지만, 본질에 대해 다시 생각해볼 필요는 있습니다.</p> <p>그렇다고 극단적으로 성능관점에서 설계를 하라는 말은 아닙니다. 역할을 분리하는게 더 중요하죠.</p> <h2 id="템플릿"><a href="#템플릿" class="header-anchor">#</a> 템플릿</h2> <p>템플릿 - 함수형 컴포넌트에서 리턴하는 React Element tree</p> <div class="language- extra-class"><pre class="language-text"><code>템플릿에는 expression을 최소화합니다. - useMemo나 useCallback을 사용하여 변수나 함수만 바인딩하도록 합니다.

템플릿에 로직을 직접 작성하지마세요.

static markup에 해당하는 부분들은 가독성을 위해 기능별로 컴포넌트로 분리합니다.

자주 렌더를 수행하는 구간에 필요하다면 React.memo를 활용해도 좋고요.
</code></pre></div><h2 id="안티패턴"><a href="#안티패턴" class="header-anchor">#</a> 안티패턴</h2> <h3 id="템플릿내-로직"><a href="#템플릿내-로직" class="header-anchor">#</a> 템플릿내 로직</h3> <p>위에서도 언급했지만, 템플릿엔 로직을 작성하지마세요.</p> <p>테스트를 어렵게 만들고 가독성을 해칩니다.</p> <p>1component 1hook 을 달성하려면 템플릿내 로직이 없어야합니다.</p> <h3 id="렌더링-간섭"><a href="#렌더링-간섭" class="header-anchor">#</a> 렌더링 간섭</h3> <p>위에서 컴포넌트는 state, props가 변경되면 리렌더되어야한다고 했습니다.</p> <p>반대로 state, props외에 다른 요소들이 렌더에 영향을 주게되면 안티패턴이라고 할 수 있습니다.</p> <p>대표적으로 DOM조작을 직접(ref를 사용하여 element를 조작하는것 또한 마찬가지입니다.)하거나, key를 사용해서 리렌더하는 방식입니다.</p> <p>ref를 사용하는 자체가 나쁜게 아니라 react 역할인 DOM조작을 개발자가 직접 할필요가 없고, 방해해서는 안됩니다.</p> <h2 id="가독성"><a href="#가독성" class="header-anchor">#</a> 가독성?</h2> <h3 id="조건부-렌더링"><a href="#조건부-렌더링" class="header-anchor">#</a> 조건부 렌더링</h3> <p>템플릿에서 조건부 렌더링을 구현할때 가능하면 if 구문을 쓰지말고 삼항연산자나 &amp;&amp; 연산자를 사용하는게 좋다고 생각합니다.</p> <p>잠깐 &amp;&amp;을 짚고 넘어가면, falsy한 값이 있다면 그것을 먼저 반환한다. 그 뒤의 expression은 무시되며 연산하지도 않는다.</p> <p>연산중에 truthy값이 있다면 그것을 반환한다.</p> <p>그러므로 조건에 falsy한 값이 있는지 잘 확인해야한다.</p> <p>예를 들면, 어떤 회원의 포인트를 렌더링한다고 하자. 포인트는 number형이다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>point <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>회원님의 포인트는 <span class="token punctuation">{</span>point<span class="token punctuation">}</span>점 입니다<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p>회원의 포인트가 0일때 단순히 0을 렌더링할것이고, '회원님의 ~' 부분은 렌더링되지 않을 것이다.</p> <p>의도하는게 아니라면, 조건을 boolean형으로 적절히 변형하자.</p> <p>이런 코드에서 문제점을 한눈에 발견하기 어려울 수도 있다.</p> <p>조건이 복잡하다면 별도 변수로 추출하여(useMemo) 보기좋게 해주면 된다.</p> <p>삼항연산자는 2개 이상 중첩하여 사용하면 상대적으로 가독성이 떨어지는 것 같다.</p> <p>그리고 조건은 boolean형으로 명시적으로 변환해주는게 좋은데,</p> <p>이유는.. 렌더링 테스트를 작성한다고 했을때, 아래와 같은 간단한 컴포넌트가 있다고 가정하면..</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>input<span class="token punctuation">,</span> setInput<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onChangeInput</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setInput</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;wrapper&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span>App<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;control&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>myInput<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChangeInput<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>myInput <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;result&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>myInput<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>초기렌더링은, wrapper 내부에, title, control, input 필드 이렇게 나타난다.</p> <p>하지만.. 조건을 보면 myInput이 string이다.</p> <p>그러면 빈문자열이 당연히 렌더되는것이라고 생각하고, 테스트 프레임워크에서는 output을</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">wrapper</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'&lt;div className=&quot;title&quot;&gt;App&lt;/div&gt;'</span><span class="token punctuation">,</span> <span class="token string">'&lt;div className=&quot;control&quot;&gt;&lt;input value={myInput} onChange={onChangeInput}/&gt;&lt;/div&gt;'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span>
</code></pre></div><p>이런식으로 나타나게된다. (예시임)</p> <p>그러면 wrapper는 2개의 element가 있어야하는데, 보이지 않지만 빈 문자열이 렌더링됐으므로 마치 3개가 있는것처럼 보인다.</p> <p>에러가 아닌데 에러처럼 보인다.</p> <p>위에서 언급한것처럼 0을 렌더링한다던지.. 이런 문제를 해결하기위해</p> <p>myInput =&gt; !!myInput 이런식으로 변경하도록 하자.</p> <hr> <p>ref: 머릿속에 있던 내용과 실전 리액트 프로그래밍이라는 책</p> <p>그리고 <a href="https://www.bsidesoft.com/8267" target="_blank" rel="noopener noreferrer">https://www.bsidesoft.com/8267<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 의 저자(선생님)의 가르침</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fe/charles-proxy.html" class="prev">찰스 프록시 사용하기</a></span> <span class="next"><a href="/fe/cors.html">cors</a>
      →
    </span></p></div>  <div id="comment-wrap"><script src="https://utteranc.es/client.js" repo="jewelism/jewelism.github.io" issue-term="컴포넌트와 컴포넌트 설계" theme="github-light" crossorigin="anonymous" async="async"></script></div></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.d8edd250.js" defer></script><script src="/assets/js/2.b813d316.js" defer></script><script src="/assets/js/1.63ec6906.js" defer></script><script src="/assets/js/61.322cf604.js" defer></script>
  </body>
</html>
