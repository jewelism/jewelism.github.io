<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>nlb | Jewelry Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-NG6SBMZL');</script>
    <link rel="icon" href="/images/logo.png">
    <meta name="description" content="dev blog">
    <meta property="og:title" content="Jewelry Blog">
    <meta property="og:description" content="dev blog">
    <meta name="naver-site-verification" property="naver-site-verification" content="5b2f37c7b4199869388745a2b48d71230f79701b">
    
    <link rel="preload" href="/assets/css/0.styles.7b19a011.css" as="style"><link rel="preload" href="/assets/js/app.d8edd250.js" as="script"><link rel="preload" href="/assets/js/2.b813d316.js" as="script"><link rel="preload" href="/assets/js/1.63ec6906.js" as="script"><link rel="preload" href="/assets/js/141.14b29649.js" as="script"><link rel="prefetch" href="/assets/js/10.68915e8a.js"><link rel="prefetch" href="/assets/js/100.d48fb8d1.js"><link rel="prefetch" href="/assets/js/101.b5ebbd9c.js"><link rel="prefetch" href="/assets/js/102.982f90cb.js"><link rel="prefetch" href="/assets/js/103.c96dc806.js"><link rel="prefetch" href="/assets/js/104.f1a3e6c7.js"><link rel="prefetch" href="/assets/js/105.bee66f51.js"><link rel="prefetch" href="/assets/js/106.d4e221ac.js"><link rel="prefetch" href="/assets/js/107.17fa7b87.js"><link rel="prefetch" href="/assets/js/108.036293f3.js"><link rel="prefetch" href="/assets/js/109.f902e0bc.js"><link rel="prefetch" href="/assets/js/11.90e8c648.js"><link rel="prefetch" href="/assets/js/110.23cf18f3.js"><link rel="prefetch" href="/assets/js/111.25a08651.js"><link rel="prefetch" href="/assets/js/112.b575ba09.js"><link rel="prefetch" href="/assets/js/113.39d46774.js"><link rel="prefetch" href="/assets/js/114.54b1d77d.js"><link rel="prefetch" href="/assets/js/115.49ad11c7.js"><link rel="prefetch" href="/assets/js/116.d1eb4002.js"><link rel="prefetch" href="/assets/js/117.641cbc64.js"><link rel="prefetch" href="/assets/js/118.8c20b0ee.js"><link rel="prefetch" href="/assets/js/119.5e1499c4.js"><link rel="prefetch" href="/assets/js/12.566e820c.js"><link rel="prefetch" href="/assets/js/120.bd6dbcbf.js"><link rel="prefetch" href="/assets/js/121.fdb8d482.js"><link rel="prefetch" href="/assets/js/122.2b358183.js"><link rel="prefetch" href="/assets/js/123.47da7d6f.js"><link rel="prefetch" href="/assets/js/124.25f4b64b.js"><link rel="prefetch" href="/assets/js/125.3600f35d.js"><link rel="prefetch" href="/assets/js/126.bf9c3ab6.js"><link rel="prefetch" href="/assets/js/127.2a668d3c.js"><link rel="prefetch" href="/assets/js/128.f6e7d7a4.js"><link rel="prefetch" href="/assets/js/129.de543284.js"><link rel="prefetch" href="/assets/js/13.7d78815a.js"><link rel="prefetch" href="/assets/js/130.b8eb138d.js"><link rel="prefetch" href="/assets/js/131.df799559.js"><link rel="prefetch" href="/assets/js/132.87f8fdd2.js"><link rel="prefetch" href="/assets/js/133.1ecedbc9.js"><link rel="prefetch" href="/assets/js/134.050b3131.js"><link rel="prefetch" href="/assets/js/135.67fab777.js"><link rel="prefetch" href="/assets/js/136.5606edf6.js"><link rel="prefetch" href="/assets/js/137.e66661fb.js"><link rel="prefetch" href="/assets/js/138.f9436bbb.js"><link rel="prefetch" href="/assets/js/139.8ea1d596.js"><link rel="prefetch" href="/assets/js/14.a384c04f.js"><link rel="prefetch" href="/assets/js/140.ac02ebc5.js"><link rel="prefetch" href="/assets/js/142.e57ed7db.js"><link rel="prefetch" href="/assets/js/143.06f2348c.js"><link rel="prefetch" href="/assets/js/144.a54de9c0.js"><link rel="prefetch" href="/assets/js/145.8714c371.js"><link rel="prefetch" href="/assets/js/146.afd802e8.js"><link rel="prefetch" href="/assets/js/15.5581965d.js"><link rel="prefetch" href="/assets/js/16.36a6df8c.js"><link rel="prefetch" href="/assets/js/17.58419ce3.js"><link rel="prefetch" href="/assets/js/18.78334840.js"><link rel="prefetch" href="/assets/js/19.31ca3599.js"><link rel="prefetch" href="/assets/js/20.55945dbc.js"><link rel="prefetch" href="/assets/js/21.6ddb8d2b.js"><link rel="prefetch" href="/assets/js/22.8d390135.js"><link rel="prefetch" href="/assets/js/23.5d48bf66.js"><link rel="prefetch" href="/assets/js/24.98a3f2a7.js"><link rel="prefetch" href="/assets/js/25.58157085.js"><link rel="prefetch" href="/assets/js/26.f12be7ca.js"><link rel="prefetch" href="/assets/js/27.8b47009c.js"><link rel="prefetch" href="/assets/js/28.94f9feb0.js"><link rel="prefetch" href="/assets/js/29.5b7d2648.js"><link rel="prefetch" href="/assets/js/3.333fb557.js"><link rel="prefetch" href="/assets/js/30.705c0baa.js"><link rel="prefetch" href="/assets/js/31.fdb59e0f.js"><link rel="prefetch" href="/assets/js/32.2383a55b.js"><link rel="prefetch" href="/assets/js/33.bfbec105.js"><link rel="prefetch" href="/assets/js/34.69f76c89.js"><link rel="prefetch" href="/assets/js/35.9f0aa7e6.js"><link rel="prefetch" href="/assets/js/36.02beee59.js"><link rel="prefetch" href="/assets/js/37.19802134.js"><link rel="prefetch" href="/assets/js/38.5653c840.js"><link rel="prefetch" href="/assets/js/39.e3b746fa.js"><link rel="prefetch" href="/assets/js/4.95c43ca0.js"><link rel="prefetch" href="/assets/js/40.96d79a78.js"><link rel="prefetch" href="/assets/js/41.268c3897.js"><link rel="prefetch" href="/assets/js/42.2339675a.js"><link rel="prefetch" href="/assets/js/43.826b5267.js"><link rel="prefetch" href="/assets/js/44.7eabcb79.js"><link rel="prefetch" href="/assets/js/45.e9a3bb83.js"><link rel="prefetch" href="/assets/js/46.7a822972.js"><link rel="prefetch" href="/assets/js/47.5e9b258d.js"><link rel="prefetch" href="/assets/js/48.6db42384.js"><link rel="prefetch" href="/assets/js/49.99deed78.js"><link rel="prefetch" href="/assets/js/5.9d9e1e88.js"><link rel="prefetch" href="/assets/js/50.7829d7c4.js"><link rel="prefetch" href="/assets/js/51.9941a5c2.js"><link rel="prefetch" href="/assets/js/52.c528219a.js"><link rel="prefetch" href="/assets/js/53.b486f5b8.js"><link rel="prefetch" href="/assets/js/54.3590e606.js"><link rel="prefetch" href="/assets/js/55.3f5aa439.js"><link rel="prefetch" href="/assets/js/56.d22c590b.js"><link rel="prefetch" href="/assets/js/57.af5f42f5.js"><link rel="prefetch" href="/assets/js/58.b12ffd2f.js"><link rel="prefetch" href="/assets/js/59.32c30e64.js"><link rel="prefetch" href="/assets/js/60.e8005a21.js"><link rel="prefetch" href="/assets/js/61.322cf604.js"><link rel="prefetch" href="/assets/js/62.c11f3a96.js"><link rel="prefetch" href="/assets/js/63.c5506d7b.js"><link rel="prefetch" href="/assets/js/64.0d80102d.js"><link rel="prefetch" href="/assets/js/65.dfb2d864.js"><link rel="prefetch" href="/assets/js/66.370ef41d.js"><link rel="prefetch" href="/assets/js/67.88c9e001.js"><link rel="prefetch" href="/assets/js/68.f338a0d2.js"><link rel="prefetch" href="/assets/js/69.bdb4c5b0.js"><link rel="prefetch" href="/assets/js/70.c38e5f80.js"><link rel="prefetch" href="/assets/js/71.88270db3.js"><link rel="prefetch" href="/assets/js/72.dcd32982.js"><link rel="prefetch" href="/assets/js/73.58f68dab.js"><link rel="prefetch" href="/assets/js/74.4ada683a.js"><link rel="prefetch" href="/assets/js/75.a6d32488.js"><link rel="prefetch" href="/assets/js/76.c0d0c351.js"><link rel="prefetch" href="/assets/js/77.5c46677d.js"><link rel="prefetch" href="/assets/js/78.d2e954df.js"><link rel="prefetch" href="/assets/js/79.737ec5f0.js"><link rel="prefetch" href="/assets/js/8.ca781c48.js"><link rel="prefetch" href="/assets/js/80.5d71fe19.js"><link rel="prefetch" href="/assets/js/81.217ef913.js"><link rel="prefetch" href="/assets/js/82.7362843c.js"><link rel="prefetch" href="/assets/js/83.5e90d306.js"><link rel="prefetch" href="/assets/js/84.4420de65.js"><link rel="prefetch" href="/assets/js/85.473092ef.js"><link rel="prefetch" href="/assets/js/86.04701726.js"><link rel="prefetch" href="/assets/js/87.83273b43.js"><link rel="prefetch" href="/assets/js/88.676b6f5c.js"><link rel="prefetch" href="/assets/js/89.9ba0b94d.js"><link rel="prefetch" href="/assets/js/9.13b3374f.js"><link rel="prefetch" href="/assets/js/90.eb51ebaa.js"><link rel="prefetch" href="/assets/js/91.7b0c3d93.js"><link rel="prefetch" href="/assets/js/92.af3e1247.js"><link rel="prefetch" href="/assets/js/93.776e9706.js"><link rel="prefetch" href="/assets/js/94.43b48ebf.js"><link rel="prefetch" href="/assets/js/95.ba8e4bc1.js"><link rel="prefetch" href="/assets/js/96.2fa5d3a3.js"><link rel="prefetch" href="/assets/js/97.1c4f3144.js"><link rel="prefetch" href="/assets/js/98.0c7cbaa6.js"><link rel="prefetch" href="/assets/js/99.b171f0e5.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.73bb25e3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7b19a011.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name" style="margin-left:15px;">Jewelry Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/js" class="sidebar-heading clickable"><span>Javascript</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/fe" class="sidebar-heading clickable"><span>Front-End</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/browser" class="sidebar-heading clickable"><span>Web Browser</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/server-side" class="sidebar-heading clickable router-link-active open"><span>Server Side</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/server-side/auto-deploy.html" class="sidebar-link">auto-deploy</a></li><li><a href="/server-side/certbot.html" class="sidebar-link">certbot</a></li><li><a href="/server-side/connect-aws.html" class="sidebar-link">connect-aws</a></li><li><a href="/server-side/docker.html" class="sidebar-link">docker</a></li><li><a href="/server-side/letsencrypt.html" class="sidebar-link">letsencrypt</a></li><li><a href="/server-side/mysql.html" class="sidebar-link">mysql</a></li><li><a href="/server-side/nginx-https.html" class="sidebar-link">nginx-https</a></li><li><a href="/server-side/nginx.html" class="sidebar-link">nginx</a></li><li><a href="/server-side/nlb.html" aria-current="page" class="active sidebar-link">nlb</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server-side/nlb.html#network-load-balance-aws" class="sidebar-link">Network Load Balance \(AWS\)</a></li><li class="sidebar-sub-header"><a href="/server-side/nlb.html#load-balancer" class="sidebar-link">Load Balancer</a></li></ul></li><li><a href="/server-side/rest.html" class="sidebar-link">rest</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/cs" class="sidebar-heading clickable"><span>Computer Science</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/git" class="sidebar-heading clickable"><span>Git</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/design-pattern" class="sidebar-heading clickable"><span>Design Pattern</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/nodejs" class="sidebar-heading clickable"><span>Node.js</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/godot" class="sidebar-heading clickable"><span>godot (고도 게임엔진)</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/tip" class="sidebar-heading clickable"><span>개발 관련 Tip</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nlb"><a href="#nlb" class="header-anchor">#</a> nlb</h1> <h2 id="network-load-balance-aws"><a href="#network-load-balance-aws" class="header-anchor">#</a> Network Load Balance (AWS)</h2> <p>*AWS의 NLB를 사용법을 간단하게 알려드리려고 합니다!</p> <div class="language- extra-class"><pre class="language-text"><code>퍼블릭'만'을 사용하는것을 전제로 합니다.

그래서 이 방법은 엄격히 따지면 정석이 아님을 알려드립니다.

먼저 *VPC 설정부터 시작합니다.

AWS에서 VPC 서비스를 선택합니다.
</code></pre></div><h3 id="_1-vpc-생성"><a href="#_1-vpc-생성" class="header-anchor">#</a> 1. VPC 생성</h3> <div class="language- extra-class"><pre class="language-text"><code>이름태그: 알아볼수있게 입력하세요 (리전-서비스이름-vpc)

IPv4 CIDR 블록: 172.16.0.0/16

나머지 기본값
</code></pre></div><h3 id="_2-서브넷-생성"><a href="#_2-서브넷-생성" class="header-anchor">#</a> 2. 서브넷 생성</h3> <div class="language- extra-class"><pre class="language-text"><code>이름태그: 알아볼수있게 입력하세요 (리전-서비스이름-subnet)

VPC: 아까 생성한 VPC 선택

가용 영역: 하나를 선택합니다. 혹시 모르니 기억해두세요

IPv4 CIDR 블록: 172.16.0.0/24
</code></pre></div><h3 id="_3-라우팅-테이블"><a href="#_3-라우팅-테이블" class="header-anchor">#</a> 3. 라우팅 테이블</h3> <div class="language- extra-class"><pre class="language-text"><code>이름태그: 알아볼수있게 입력하세요 (리전-서비스이름-rt)

VPC: 아까 생성한 VPC 선택
</code></pre></div><h3 id="_4-인터넷-게이트웨이"><a href="#_4-인터넷-게이트웨이" class="header-anchor">#</a> 4. 인터넷 게이트웨이</h3> <div class="language- extra-class"><pre class="language-text"><code>인터넷 게이트 웨이 생성

이름태그: 알아볼수있게 입력하세요 (리전-서비스이름-igw)
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>생성된 igw를 아까 생성한 VPC에 연결
</code></pre></div><h3 id="_5-라우팅-테이블-설정"><a href="#_5-라우팅-테이블-설정" class="header-anchor">#</a> 5. 라우팅 테이블 설정</h3> <div class="language- extra-class"><pre class="language-text"><code>아까 생성한 라우팅 테이블을 설정합니다.

해당 rt를 선택합니다.

서브넷 연결탭 =&gt; 서브넷 연결 편집 버튼 클릭

아까 생성한 서브넷에 체크하고 저장

라우팅 탭에서 라우팅 편집 버튼을 클릭합니다

라우팅 추가 버튼을 클릭

대상으로 먼저 0.0.0.0/0 입력

두번째 대상으로 Internet gateway 선택, 아까 생성한 igw 선택
</code></pre></div><h3 id="_6-네트워크-acl-확인"><a href="#_6-네트워크-acl-확인" class="header-anchor">#</a> 6. 네트워크 ACL 확인</h3> <div class="language- extra-class"><pre class="language-text"><code>네트워크 ACL에서 해당 VPC가 연결된 네트워크 ACL을 선택하고 인바운드, 아웃바운드 규칙을 확인합니다.

여기서 규칙번호의 숫자가 낮은것이 우선적으로 적용됩니다
</code></pre></div><h2 id="load-balancer"><a href="#load-balancer" class="header-anchor">#</a> Load Balancer</h2> <div class="language- extra-class"><pre class="language-text"><code>본격적인 AWS의 EC2 서비스에서 로드밸런서를 생성하고 설정해보겠습니다
</code></pre></div><h3 id="_1-로드-밸런서-생성"><a href="#_1-로드-밸런서-생성" class="header-anchor">#</a> 1. 로드 밸런서 생성</h3> <div class="language- extra-class"><pre class="language-text"><code>로드밸런서메뉴에서 로드밸런서 생성 버튼 클릭

Network Load Balancer 선택

알아볼수있는 이름 입력 (리전-서비스이름-nlb)

체계: 인터넷 연결

리스너는 TLS만 우선 선택합니다

가용영역에서는 위에서 생성한 VPC를 선택하도록 합니다

그리고 아까 기억해뒀던 가용영역을 선택합니다. (어차피 과정을 따라했다면 그것밖에 없지만..)

IPv4 주소는 탄력적 IP(EIP)를 선택합니다. 없으면 생성.

실험차 생성해봤는데, EIP를 생성해도 탄력적 IP 선택이 불가능한데,

새로고침해야 선택할수있습니다..

두번째로 보안 설정 구성인데, 저는 유료 인증서가 없으므로, certbot를 사용합니다

certbot을 사용하면 letsencrypt인증서를 생성하고, 편하게 [IAM으로 인증서업로드] 과정을 진행할수있습니다
</code></pre></div><p><a href="/server-side/certbot.html">certbot에 대한 내용은 여기서 확인하세요</a></p> <div class="language- extra-class"><pre class="language-text"><code>세번째는 라우팅 구성인데, 이건 앞으로 서브넷에 ec2를 생성하고 그 ec2에 연결할것이므로

대상유형에 ip를 지정하고 서브넷에 생성한 ec2들을 지정하면 됩니다.

예를들어 ec2의 첫번째 인스턴스의 3000번 포트를 사용하고싶다하면 해당 인스턴스 private ip와 포트를 작성해주면됩니다.

그리고 네번째 대상그룹인데, 여기서 이제 두번째, 세번째, ...인스턴스들을 추가해주면 됩니다.
</code></pre></div><p>L4 레벨에서 로드밸런싱을 해준다니 좋은 기능인것같습니다. 그래서 특히나 통합으로 인증서를 관리하는건</p> <p>letsencrypt특성상 3개월마다 인증서 갱신을 확인하는 절차가 사라져서 편리합니다.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/server-side/nginx.html" class="prev">nginx</a></span> <span class="next"><a href="/server-side/rest.html">rest</a>
      →
    </span></p></div>  <div id="comment-wrap"><script src="https://utteranc.es/client.js" repo="jewelism/jewelism.github.io" issue-term="nlb" theme="github-light" crossorigin="anonymous" async="async"></script></div></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.d8edd250.js" defer></script><script src="/assets/js/2.b813d316.js" defer></script><script src="/assets/js/1.63ec6906.js" defer></script><script src="/assets/js/141.14b29649.js" defer></script>
  </body>
</html>
